<section class="cont-page font animate__animated animate__fadeIn">

    <div class="cont-representacion">
        <!-- <section class="cont-action">

            <div class="cont-ipts">

                <widget-input [label]="'Filtra por: Nombres, apellidos, ruc y dni'"
                    [placeholder]="'Filtra por: Nombres, apellidos, ruc y dni'" class="w-ipt"
                    (valor)="filtroPorCampo($event)" />
            </div>

        </section> -->


        <!--* Tabla y filto local -->
        <section class="cont-datasource">

            <div class="datasource">
                <div class="cont-table-crud">

                    <div class="body-cont-table">

                        <!--* cont del filtro -->
                        <div class="cont-filter">

                            <div class="inputContainer ">
                                <input required="required" class="inputField" placeholder="Filtro" type="text"
                                    (keyup)="applyFilter($event)" #input>
                                <label class="usernameLabel font">Filtro</label>
                                <img class="userIcon" src="../../../../assets/imgs/icons/filter.svg">

                            </div>
                        </div>
                        <!--* END - cont del filtro -->

                        <!--* contenedor de la tabla y el paginador  -->
                        <div class="cont-operations">

                            <!--* contenedor de la tabla  -->
                            <div class="cont-table" id="dvContTable">
                                <!--* TABLA  -->
                                <table mat-table [dataSource]="dataSource" matSort>


                                    <!--* Fecha Column -->
                                    <ng-container matColumnDef="fecha">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Fecha registrada </th>
                                        <td mat-cell *matCellDef="let row"> <span
                                                style="font-weight: normal;">{{row.fecha | date : 'medium' }} </span>
                                        </td>
                                    </ng-container>

                                    <!--* ID Column -->
                                    <ng-container matColumnDef="idFactura">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Id Factura </th>
                                        <td mat-cell *matCellDef="let row">

                                            <div style="display: flex; align-items: center; gap: 7px; margin: auto;">
                                                <span style="font-weight: 700;"> {{row.idFactura}}</span>
                                                <!--* edicion para factura  -->
                                                <button mat-icon-button color="primary"
                                                    style="color: var(--color-button-01);"
                                                    (click)="viewPdf( row )"><mat-icon>picture_as_pdf
                                                    </mat-icon></button>
                                                <button mat-icon-button color="primary"
                                                    style="color: var(--color-button-01);"
                                                    (click)="downloadPdf( row )"><mat-icon>cloud_download
                                                    </mat-icon></button>
                                            </div>

                                        </td>
                                    </ng-container>

                                    <!--* Codigo Factura Column -->
                                    <ng-container matColumnDef="codigoFactura">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Cod. Factura </th>
                                        <td mat-cell *matCellDef="let row"> {{row.codigoFactura}} </td>
                                    </ng-container>

                                    <!--* Id Orden Servicio Column -->
                                    <ng-container matColumnDef="idOrdenServicio">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Id Orden Servicio </th>
                                        <td mat-cell *matCellDef="let row">
                                            <div style="display: flex; align-items: center; gap: 7px; margin: auto;">
                                                <span style="font-weight: 700;">
                                                    {{row.ordenServicio.idOrdenServicio}}</span>
                                                <!--* edicion para orden de servicio  -->
                                                <button mat-icon-button color="accent" style="color: var(--rust-40);"
                                                    (click)="viewPdf( row.ordenServicio )"><mat-icon>picture_as_pdf
                                                    </mat-icon></button>
                                                <button mat-icon-button color="accent" style="color: var(--rust-40);"
                                                    (click)="downloadPdf( row.ordenServicio )"><mat-icon>cloud_download
                                                    </mat-icon></button>
                                            </div>
                                        </td>
                                    </ng-container>
                                    <!--* Codigo Orden Column -->
                                    <ng-container matColumnDef="codigoOrden">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Cod. Orden Servicio </th>
                                        <td mat-cell *matCellDef="let row"> {{row.ordenServicio.codigoOrden}} </td>
                                    </ng-container>

                                    <!--* Estado Column -->
                                    <ng-container matColumnDef="estado">
                                        <th mat-header-cell *matHeaderCellDef id="estadoTh"> Estado </th>
                                        <td mat-cell *matCellDef="let row" id="estadoTd"> <mat-icon
                                                style="text-align: center;"
                                                [ngStyle]="{color: row.estado? '#0f0':'#f00'}">radio_button_unchecked</mat-icon>
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="acciones">
                                        <th mat-header-cell *matHeaderCellDef> Acciones </th>
                                        <td mat-cell *matCellDef="let row">

                                            <div class="cont-acction-buttons">
                                                <!-- <button mat-icon-button color="primary"
                                                    ><mat-icon>cloud_circle</mat-icon></button> -->
                                                <button mat-icon-button color="primary"
                                                    style="color: var(--color-button-01);"
                                                    (click)="fnCreateOrUpdate( row )"><mat-icon>edit_square</mat-icon></button>
                                                <button mat-icon-button color="warn"
                                                    (click)="fnDelete( row, true )"><mat-icon>delete</mat-icon></button>
                                                <button mat-icon-button color="accent"
                                                    (click)="fnDelete( row, false )"><mat-icon>bookmark_remove</mat-icon></button>
                                            </div>

                                        </td>
                                    </ng-container>



                                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                                    <!--* Row shown when there is no matching data. -->
                                    <tr class="mat-row" *matNoDataRow style="width: 100% !important;">
                                        <td class="mat-cell" colspan="4">No hay datos que coincidan con el filtro
                                            "{{input.value}}"</td>
                                    </tr>
                                </table>
                                <!--* END - TABLA -->
                            </div>
                            <!--* END - contenedor de la tabla  -->

                            <!--* cont - paginador -->
                            <div class="cont-paginator">

                                <!--* cont de los botones  -->
                                <div class="cont-paginator-btns">
                                    <button mat-icon-button color="primary"><img class="p-b" style="color: red;"
                                            src="../../../../assets/imgs/icons/file-pdf.png" alt=""></button>
                                    <button mat-icon-button color="primary"
                                        (click)="fnCreateOrUpdate()"><mat-icon>add</mat-icon></button>
                                    <button mat-icon-button color="primary"
                                        (click)="fnReloadData()"><mat-icon>cloud_sync</mat-icon></button>

                                </div>
                                <!--* END - cont de los botones  -->

                                <div class="example-spacer "></div>

                                <!--* paginador - MAIN -->
                                <mat-paginator *ngIf="!isEnableFilterPaginator; else paginatorFilter" class="paginator"
                                    [pageSizeOptions]="[1, 5, 10, 25, 100]" aria-label="Select page of users"
                                    [length]="cantidad" (page)="nextPage($event)"></mat-paginator>
                                <!--* END - paginador MAIN -->

                                <ng-template #paginatorFilter>
                                    <!--* paginador - FILTER -->
                                    <mat-paginator class="paginator" [pageSizeOptions]="[1, 5, 10, 25, 100]"
                                        aria-label="Select page of users" [length]="cantidad"
                                        (page)="nextPageFiltro($event)"></mat-paginator>
                                    <!--* END - paginador FILTER -->
                                </ng-template>

                            </div>
                            <!--* END - cont - paginador -->

                        </div>
                        <!--* END - contenedor de la taba y el paginador -->

                    </div>

                </div>
            </div>

            <!-- <div id="contenedorA"></div> -->
        </section>
        <!--* END - Tabl y filtro local -->
    </div>


</section>