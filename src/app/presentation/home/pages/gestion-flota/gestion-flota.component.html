<section class="cont-page font animate__animated animate__fadeIn">

    <div class="cont-representacion">

        <section class="cont-action">

            <div class="cont-ipts">
                <widget-input [label]="'Filtra por: Nombres, apellidos y dni'"
                    [placeholder]="'Filtra por la placa del vehiculo'" class="w-ipt" (valor)="filtroPorCampo($event)" />
            </div>

        </section>


        <!--* Tabla y filto local -->
        <section class="cont-datasource">

            <div class="datasource">
                <div class="cont-table-crud">

                    <div class="body-cont-table">

                        <!--* cont del filtro -->
                        <div class="cont-filter">

                            <div class="inputContainer ">
                                <input required="required" class="inputField" placeholder="Filtro" type="text"
                                    (keyup)="applyFilter($event)" #input>
                                <label class="usernameLabel font">Filtro</label>
                                <img class="userIcon" src="../../../../assets/imgs/icons/filter.svg">

                            </div>
                        </div>
                        <!--* END - cont del filtro -->

                        <!--* contenedor de la tabla y el paginador  -->
                        <div class="cont-operations">

                            <!--* contenedor de la tabla  -->
                            <div class="cont-table" id="dvContTable">
                                <!--* TABLA  -->
                                <table mat-table [dataSource]="dataSource" matSort>

                                    <!-- ['idCliente', 'nombres', 'telefono', 'email', 'estado', 'acciones']; -->

                                    <!-- ID Column -->
                                    <ng-container matColumnDef="idVehiculo">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header> ID </th>
                                        <td mat-cell *matCellDef="let row">
                                            <div *ngIf="isLoadedDate ; else skeleton"
                                                class="animate__animated animate__fadeIn">
                                                {{row.idVehiculo}} <widget-tag [value]="row.tipoVehiculo.tipo"/>
                                            </div>
                                            <ng-template #skeleton>
                                                <div
                                                    style="display: inline-block !important; width: 100%; height: 20px; border-radius: 10px; overflow: hidden;">
                                                    <widget-skeleton />
                                                </div>
                                            </ng-template>
                                        </td>
                                    </ng-container>


                                    <!-- Descripcion Column -->
                                    <ng-container matColumnDef="descripcion">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Tipo del vehiculo </th>
                                        <td mat-cell *matCellDef="let row">

                                            <div *ngIf="isLoadedDate ; else skeleton"
                                                class="animate__animated animate__fadeIn">
                                                {{row.tipoVehiculo.descripcion}}
                                            </div>

                                            <ng-template #skeleton>
                                                <div
                                                    style="display: inline-block !important; width: 100%; height: 20px; border-radius: 10px; overflow: hidden;">
                                                    <widget-skeleton />
                                                </div>
                                            </ng-template>

                                        </td>
                                    </ng-container>


                                    <!-- Placa Column -->
                                    <ng-container matColumnDef="placa">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Placa </th>
                                        <td mat-cell *matCellDef="let row">

                                            <div *ngIf="isLoadedDate ; else skeleton"
                                                class="animate__animated animate__fadeIn">
                                                {{row.placa}}
                                            </div>

                                            <ng-template #skeleton>
                                                <div
                                                    style="display: inline-block !important; width: 100%; height: 20px; border-radius: 10px; overflow: hidden;">
                                                    <widget-skeleton />
                                                </div>
                                            </ng-template>

                                        </td>
                                    </ng-container>

                                    

                                    <!-- Estado Column -->
                                    <ng-container matColumnDef="estado">
                                        <th mat-header-cell *matHeaderCellDef id="estadoTh"> Estado </th>
                                        <td mat-cell *matCellDef="let row" id="estadoTd">
                                            <div *ngIf="isLoadedDate ; else skeleton"
                                                class="animate__animated animate__fadeIn">
                                                <mat-icon style="text-align: center;"
                                                    [ngStyle]="{color: row.estado? '#0f0':'#f00'}">radio_button_unchecked</mat-icon>
                                            </div>

                                            <ng-template #skeleton>
                                                <div
                                                    style="display: inline-block !important; width: 100%; height: 20px; border-radius: 10px; overflow: hidden;">
                                                    <widget-skeleton />
                                                </div>
                                            </ng-template>
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="acciones">
                                        <th mat-header-cell *matHeaderCellDef> Acciones </th>
                                        <td mat-cell *matCellDef="let row">

                                            <div class="cont-acction-buttons" *ngIf="isLoadedDate ; else skeleton">
                                                <button mat-icon-button color="primary"
                                                    (click)="fnCreateOrUpdate( row )"
                                                    class="animate__animated animate__fadeIn"><mat-icon>edit</mat-icon></button>
                                                <button mat-icon-button color="warn" (click)="fnDelete( row, true )"
                                                    class="animate__animated animate__fadeIn"><mat-icon>delete</mat-icon></button>
                                                <button mat-icon-button color="accent" (click)="fnDelete( row, false )"
                                                    class="animate__animated animate__fadeIn"><mat-icon>bookmark_remove</mat-icon></button>
                                            </div>

                                            <ng-template #skeleton>
                                                <div
                                                    style="display: inline-block !important; width: 100%; height: 20px; border-radius: 10px; overflow: hidden;">
                                                    <widget-skeleton />
                                                </div>
                                            </ng-template>

                                        </td>
                                    </ng-container>



                                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                                    <!-- Row shown when there is no matching data. -->
                                    <tr class="mat-row" *matNoDataRow style="width: 100% !important;">
                                        <td class="mat-cell" colspan="4">No hay datos que coincidan con el filtro
                                            "{{input.value}}"</td>
                                    </tr>
                                </table>
                                <!--* END - TABLA -->
                            </div>
                            <!--* END - contenedor de la tabla  -->

                            <!--* cont - paginador -->
                            <div class="cont-paginator">

                                <!--* cont de los botones  -->
                                <div class="cont-paginator-btns">
                                    <button mat-icon-button color="primary"><img class="p-b" style="color: red;"
                                            src="../../../../assets/imgs/icons/file-pdf.png" alt=""></button>
                                    <button mat-icon-button color="primary"
                                        (click)="fnCreateOrUpdate()"><mat-icon>add</mat-icon></button>
                                    <button mat-icon-button color="primary"
                                        (click)="fnReloadData()"><mat-icon>cloud_sync</mat-icon></button>
                                    <section class="cont-groups-radio-btn">
                                        <label class="example-margin">Solo clientes:</label>
                                        <mat-radio-group [(ngModel)]="estadoVehiculos" (change)="loadDataByStatus()"
                                            class="cont-radio-btns">
                                            <mat-radio-button value="1">
                                                <span class="font">Activos</span>
                                            </mat-radio-button>
                                            <mat-radio-button value="0">
                                                <span class="font">Desactivos</span>
                                            </mat-radio-button>
                                            <mat-radio-button value="2">
                                                <span class="font">Ambos</span>
                                            </mat-radio-button>
                                        </mat-radio-group>
                                    </section>

                                </div>
                                <!--* END - cont de los botones  -->

                                <div class="example-spacer "></div>

                                <!--* paginador - MAIN -->
                                <mat-paginator *ngIf="!isEnableFilterPaginator; else paginatorFilter" class="paginator"
                                    [pageSizeOptions]="[ 1,5, 10, 25, 100]" aria-label="Select page of users"
                                    [length]="cantidad" (page)="nextPage($event)"></mat-paginator>
                                <!--* END - paginador MAIN -->

                                <ng-template #paginatorFilter>
                                    <!--* paginador - FILTER -->
                                    <mat-paginator class="paginator" [pageSizeOptions]="[ 1, 5, 10, 25, 100]"
                                        aria-label="Select page of users" [length]="cantidad"
                                        (page)="nextPageFiltro($event)"></mat-paginator>
                                    <!--* END - paginador FILTER -->
                                </ng-template>

                            </div>
                            <!--* END - cont - paginador -->

                        </div>
                        <!--* END - contenedor de la taba y el paginador -->

                    </div>

                </div>
            </div>
        </section>
        <!--* END - Tabl y filtro local -->

    </div>


</section>